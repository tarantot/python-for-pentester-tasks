"""
Напишите программу, которая спарсит с http://foxtools.ru/Proxy адреса прокси со
ВСЕХ страниц и выведет их в консоль.
"""
import requests as r
from bs4 import BeautifulSoup as bS

print('-' * 5 + ' Беспалевные айпишнеги ' + '-' * 5 + '\n')
print(f'IP-адреc        : Порт\n')


def pages_count(html):
    global b, soup
    soup = bS(html.text, 'lxml')
    a = soup.find("div", {"class": "pager"})
    b = int(a.find_all('a')[-1].string)


def parser_task_3(html):
    res = soup.find('table', id="theProxyList").find('tbody').find_all('input')
    for i in res:
        print(f"{i['value'].split(':')[0]:<15} : {i['value'].split(':')[1]:<4}")


if __name__ == '__main__':
    url = 'http://foxtools.ru/Proxy'
    page = r.get(url)
    pages_count(page)
    for i in range(0, b, 1):
        page = r.get(f'{url}?page={str(i + 1)}')
        parser_task_3(page)
