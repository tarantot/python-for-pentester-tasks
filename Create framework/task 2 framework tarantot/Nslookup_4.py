"""
Эта программа для запроса к серверам DNS (доменная система имён),
предоставляет информацию о различных DNS записях домена.
"""
from nslookup import Nslookup
import re


def nslookup():
    domain = input('Enter host [site.com]: ')
    while not re.fullmatch(r'[\d\-_.~a-z]+\.[a-z]{2,}', domain):
        print('\nPlease enter a host by the pattern [site.com] !!!\n')
        domain = input('Enter host [site.com]: ')
    else:
        dns_query = Nslookup(dns_servers=['1.1.1.1'])
        try:
            ips_record = dns_query.dns_lookup(domain)
        except Exception as e:
            return f'{domain} ERROR --- {e}'
        else:
            results = []
            for i in ips_record.response_full:
                results.append(i)

            soa_record = dns_query.soa_lookup(domain)
            for j in soa_record.response_full:
                results.append('\n'.join(j.split('. ')))

            return '\n'.join(results)
