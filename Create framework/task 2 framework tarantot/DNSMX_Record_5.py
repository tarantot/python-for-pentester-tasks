"""
MX-запись указывает на сервер, принимающий почту для домена.
"""
import dns.resolver
import re


def dns_mx_record():
    address = input('Enter host [site.com]: ')
    while not re.fullmatch(r'[\d\-_.~a-z]+\.[a-z]{2,}', address):
        print('\nPlease enter a host by the pattern [site.com] !!!\n')
        address = input('Enter host [site.com]: ')
    else:
        my_resolver = dns.resolver.Resolver(configure=False)
        my_resolver.nameservers = ['8.8.8.8', '1.1.1.1']
        try:
            answers = my_resolver.query(address, 'MX')
        except Exception as e:
            return f'{address} ERROR --- {e}'
        else:
            for rdata in answers:
                return f'{address} MX Record: {rdata.exchange}'
