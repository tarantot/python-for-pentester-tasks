from tqdm import tqdm
import zipfile


# Путь к файлу с паролями
wordlist = '/usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt'
# Путь к архиву
path_file = '/root/PycharmProjects/education/secret.zip'
# Инициализация объекта файла Zip
zip_file = zipfile.ZipFile(path_file)
# Количество слов в вордлисте
words = len(list(open(wordlist, "rb")))
# Вывод количества слов
print("Total passwords to test:", words)
with open(wordlist, "rb") as f:
    for word in tqdm(f, total=words, unit=" word"):
        try:
            zip_file.extractall(pwd=word.strip())
        except:
            pass
        else:
            print("\nPassword found:" + '\033[32m', word.decode().strip())
            exit(0)
print("\nPassword not found", '\033[91m' + "try other wordlist.")
